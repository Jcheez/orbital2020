{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bryan\\\\Desktop\\\\my-app\\\\orbital2020\\\\src\\\\components\\\\latest rate component\\\\chfgraph_monthly.js\";\nimport React, { Component } from \"react\";\nimport { Line } from \"react-chartjs-2\";\nimport axios from \"axios\";\nimport moment from \"moment\";\n\nclass chfchart_m extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      chartData: {}\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:5000/currencies/CHF\").then(response => {\n      var today = new Date();\n      var Month = today.getMonth() + 1;\n      var Month_str = Month.toString();\n\n      if (Month_str.length === 1) {\n        Month_str = \"0\" + Month_str;\n      }\n\n      var today_dbs = [];\n      var today_uob = [];\n      var today_ocbc = [];\n\n      for (let i = 0, len = response.data.length; i < len; i++) {\n        // let curr_date = response.data[i].Date.split(\"/\");\n        let db_date = moment(response.data[i].Date, \"DD-MM-YYYY\");\n        let current_date = moment();\n        let date_difference = current_date.diff(db_date, \"days\");\n        let time_recorded = response.data[i].timeRecorded;\n\n        if ( // curr_date[1] === Month_str &&\n        date_difference < 32 && (time_recorded === \"09:00\" || time_recorded === \"09:01\" || time_recorded === \"09:02\" || time_recorded === \"09:03\" || time_recorded === \"09:04 \" || time_recorded === \"09:05\" || time_recorded === \"18:00\" || time_recorded === \"18:01\" || time_recorded === \"18:02\" || time_recorded === \"18:03\" || time_recorded === \"18:04\" || time_recorded === \"18:05\")) {\n          if (response.data[i].Bank === \"DBS\" && typeof response.data[i].rates[0].v === \"number\" && response.data[i].rates[0].v !== 0) {\n            today_dbs.push(response.data[i]);\n          } else if (response.data[i].Bank === \"UOB\" && typeof response.data[i].rates[0].v === \"number\" && response.data[i].rates[0].v !== 0) {\n            today_uob.push(response.data[i]);\n          } else if (response.data[i].Bank === \"OCBC\" && typeof response.data[i].rates[0].v === \"number\" && response.data[i].rates[0].v !== 0) {\n            today_ocbc.push(response.data[i]);\n          }\n        }\n      }\n\n      function get_rates(item) {\n        var rate = item.rates[0].v / item.rates[1].v;\n        return rate;\n      }\n\n      function get_timedate(item) {\n        var timedate = [item.Date, item.timeRecorded].join(\" \");\n        return timedate;\n      }\n\n      function combiner(rates, dates) {\n        var result = [];\n\n        for (let i = 0, len = response.data.length; i < len; i++) {\n          var curr_rate = rates[i];\n          var curr_date = dates[i];\n          var data = {\n            x: curr_date,\n            y: curr_rate\n          };\n          result.push(data);\n        }\n\n        return result;\n      }\n\n      var dbs_rates = today_dbs.map(get_rates);\n      var uob_rates = today_uob.map(get_rates);\n      var ocbc_rates = today_ocbc.map(get_rates);\n      var dbs_timedates = today_dbs.map(get_timedate);\n      var uob_timedates = today_uob.map(get_timedate);\n      var ocbc_timedates = today_ocbc.map(get_timedate);\n      this.setState({\n        chartData: {\n          labels: dbs_timedates,\n          datasets: [{\n            label: \"DBS\",\n            data: combiner(dbs_rates, dbs_timedates),\n            backgroundColor: [\"rgba(255, 255, 255, 0)\"],\n            borderColor: [\"rgba(255, 159, 64, 1)\"],\n            borderWidth: 1,\n            labels: dbs_timedates\n          }, {\n            label: \"UOB\",\n            data: combiner(uob_rates, uob_timedates),\n            backgroundColor: [\"rgba(255, 255, 255, 0)\"],\n            borderColor: [\"rgba(63, 191, 127, 1)\"],\n            borderWidth: 1,\n            labels: uob_timedates\n          }, {\n            label: \"OCBC\",\n            data: combiner(ocbc_rates, ocbc_timedates),\n            backgroundColor: [\"rgba(255, 255, 255, 0)\"],\n            borderColor: [\"rgba(191, 63, 63, 1)\"],\n            borderWidth: 1,\n            labels: ocbc_timedates\n          }]\n        }\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Line, {\n      data: this.state.chartData,\n      height: \"400\",\n      width: \"400\",\n      options: {\n        maintainAspectRatio: false\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default chfchart_m;","map":{"version":3,"sources":["C:/Users/Bryan/Desktop/my-app/orbital2020/src/components/latest rate component/chfgraph_monthly.js"],"names":["React","Component","Line","axios","moment","chfchart_m","constructor","props","state","chartData","componentDidMount","get","then","response","today","Date","Month","getMonth","Month_str","toString","length","today_dbs","today_uob","today_ocbc","i","len","data","db_date","current_date","date_difference","diff","time_recorded","timeRecorded","Bank","rates","v","push","get_rates","item","rate","get_timedate","timedate","join","combiner","dates","result","curr_rate","curr_date","x","y","dbs_rates","map","uob_rates","ocbc_rates","dbs_timedates","uob_timedates","ocbc_timedates","setState","labels","datasets","label","backgroundColor","borderColor","borderWidth","catch","error","console","log","render","maintainAspectRatio"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Line } from \"react-chartjs-2\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\n\r\nclass chfchart_m extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      chartData: {},\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios\r\n      .get(\"http://localhost:5000/currencies/CHF\")\r\n      .then((response) => {\r\n        var today = new Date();\r\n\r\n        var Month = today.getMonth() + 1;\r\n        var Month_str = Month.toString();\r\n\r\n        if (Month_str.length === 1) {\r\n          Month_str = \"0\" + Month_str;\r\n        }\r\n\r\n        var today_dbs = [];\r\n        var today_uob = [];\r\n        var today_ocbc = [];\r\n\r\n        for (let i = 0, len = response.data.length; i < len; i++) {\r\n          // let curr_date = response.data[i].Date.split(\"/\");\r\n          let db_date = moment(response.data[i].Date, \"DD-MM-YYYY\");\r\n          let current_date = moment();\r\n          let date_difference = current_date.diff(db_date, \"days\");\r\n          let time_recorded = response.data[i].timeRecorded;\r\n          if (\r\n            // curr_date[1] === Month_str &&\r\n            date_difference < 32 &&\r\n            (time_recorded === \"09:00\" ||\r\n              time_recorded === \"09:01\" ||\r\n              time_recorded === \"09:02\" ||\r\n              time_recorded === \"09:03\" ||\r\n              time_recorded === \"09:04 \" ||\r\n              time_recorded === \"09:05\" ||\r\n              time_recorded === \"18:00\" ||\r\n              time_recorded === \"18:01\" ||\r\n              time_recorded === \"18:02\" ||\r\n              time_recorded === \"18:03\" ||\r\n              time_recorded === \"18:04\" ||\r\n              time_recorded === \"18:05\")\r\n          ) {\r\n            if (\r\n              response.data[i].Bank === \"DBS\" &&\r\n              typeof response.data[i].rates[0].v === \"number\" &&\r\n              response.data[i].rates[0].v !== 0\r\n            ) {\r\n              today_dbs.push(response.data[i]);\r\n            } else if (\r\n              response.data[i].Bank === \"UOB\" &&\r\n              typeof response.data[i].rates[0].v === \"number\" &&\r\n              response.data[i].rates[0].v !== 0\r\n            ) {\r\n              today_uob.push(response.data[i]);\r\n            } else if (\r\n              response.data[i].Bank === \"OCBC\" &&\r\n              typeof response.data[i].rates[0].v === \"number\" &&\r\n              response.data[i].rates[0].v !== 0\r\n            ) {\r\n              today_ocbc.push(response.data[i]);\r\n            }\r\n          }\r\n        }\r\n\r\n        function get_rates(item) {\r\n          var rate = item.rates[0].v / item.rates[1].v;\r\n          return rate;\r\n        }\r\n\r\n        function get_timedate(item) {\r\n          var timedate = [item.Date, item.timeRecorded].join(\" \");\r\n          return timedate;\r\n        }\r\n\r\n        function combiner(rates, dates) {\r\n          var result = [];\r\n          for (let i = 0, len = response.data.length; i < len; i++) {\r\n            var curr_rate = rates[i];\r\n            var curr_date = dates[i];\r\n            var data = { x: curr_date, y: curr_rate };\r\n            result.push(data);\r\n          }\r\n          return result;\r\n        }\r\n\r\n        var dbs_rates = today_dbs.map(get_rates);\r\n        var uob_rates = today_uob.map(get_rates);\r\n        var ocbc_rates = today_ocbc.map(get_rates);\r\n\r\n        var dbs_timedates = today_dbs.map(get_timedate);\r\n        var uob_timedates = today_uob.map(get_timedate);\r\n        var ocbc_timedates = today_ocbc.map(get_timedate);\r\n\r\n        this.setState({\r\n          chartData: {\r\n            labels: dbs_timedates,\r\n            datasets: [\r\n              {\r\n                label: \"DBS\",\r\n                data: combiner(dbs_rates, dbs_timedates),\r\n                backgroundColor: [\"rgba(255, 255, 255, 0)\"],\r\n                borderColor: [\"rgba(255, 159, 64, 1)\"],\r\n                borderWidth: 1,\r\n                labels: dbs_timedates,\r\n              },\r\n              {\r\n                label: \"UOB\",\r\n                data: combiner(uob_rates, uob_timedates),\r\n                backgroundColor: [\"rgba(255, 255, 255, 0)\"],\r\n                borderColor: [\"rgba(63, 191, 127, 1)\"],\r\n                borderWidth: 1,\r\n                labels: uob_timedates,\r\n              },\r\n              {\r\n                label: \"OCBC\",\r\n                data: combiner(ocbc_rates, ocbc_timedates),\r\n                backgroundColor: [\"rgba(255, 255, 255, 0)\"],\r\n                borderColor: [\"rgba(191, 63, 63, 1)\"],\r\n                borderWidth: 1,\r\n                labels: ocbc_timedates,\r\n              },\r\n            ],\r\n          },\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Line\r\n          data={this.state.chartData}\r\n          height=\"400\"\r\n          width=\"400\"\r\n          options={{ maintainAspectRatio: false }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default chfchart_m;\r\n"]},"metadata":{},"sourceType":"module"}