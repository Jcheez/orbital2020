{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Bryan\\\\Desktop\\\\my-app\\\\orbital2020\\\\src\\\\components\\\\favourite component\\\\favourite_button.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { loginUser } from \"../../actions/authActions\";\nimport Axios from \"axios\";\n\nclass fav_button extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text1: \"Add to Favourites\",\n      text2: \"Added to favourites\",\n      favourites: [],\n      added: \"\",\n      email: \"\"\n    };\n    this.logger = this.logger.bind(this);\n    this.button_function = this.button_function.bind(this);\n  }\n\n  componentDidMount() {\n    Axios.get(\"http://localhost:5000/users/user\").then(response => {\n      var curr_email = localStorage.getItem(\"email\");\n      var data_array = [];\n\n      for (let i = 0, len = response.data.length; i < len; i++) {\n        let email = response.data[i].email;\n\n        if (curr_email === email) {\n          data_array = response.data[i].favourites;\n        }\n      }\n\n      var currency_added = \"\";\n\n      for (let i = 0, len = data_array.length; i < len; i++) {\n        if (data_array[i] === this.props.currency) {\n          currency_added = true;\n        }\n      }\n\n      this.setState({\n        favourites: data_array,\n        email: curr_email,\n        added: currency_added\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n  logger() {\n    console.log(this.state.email);\n    console.log(this.state.favourites);\n    console.log(this.props.currency);\n    console.log(this.state.added);\n  }\n\n  button_function() {\n    if (this.state.added) {\n      Axios.post(\"http://localhost:5000/users/userdeletefav\", {\n        email: this.state.email,\n        favourites: this.props.currency\n      });\n      this.setState({\n        added: false\n      });\n    } else {\n      Axios.post(\"http://localhost:5000/users/userupdatefav\", {\n        email: this.state.email,\n        favourites: this.props.currency\n      });\n      this.setState({\n        added: true\n      });\n    }\n  }\n\n  button_text() {\n    if (this.state.added) {\n      return this.state.text2;\n    } else {\n      return this.state.text1;\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.button_function,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 12\n      }\n    }, this.button_text());\n  }\n\n}\n\nconst mapStateToProps = state => {\n  if (state.auth.emaildata !== undefined) {\n    localStorage.setItem(\"email\", state.auth.emaildata.email);\n    return {\n      email: state.auth.emaildata.email\n    };\n  }\n};\n\nexport default connect(mapStateToProps, {\n  loginUser\n})(fav_button);","map":{"version":3,"sources":["C:/Users/Bryan/Desktop/my-app/orbital2020/src/components/favourite component/favourite_button.js"],"names":["React","Component","connect","loginUser","Axios","fav_button","constructor","props","state","text1","text2","favourites","added","email","logger","bind","button_function","componentDidMount","get","then","response","curr_email","localStorage","getItem","data_array","i","len","data","length","currency_added","currency","setState","catch","error","console","log","post","button_text","render","mapStateToProps","auth","emaildata","undefined","setItem"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { loginUser } from \"../../actions/authActions\";\r\nimport Axios from \"axios\";\r\n\r\nclass fav_button extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      text1: \"Add to Favourites\",\r\n      text2: \"Added to favourites\",\r\n      favourites: [],\r\n      added: \"\",\r\n      email: \"\",\r\n    };\r\n    this.logger = this.logger.bind(this);\r\n    this.button_function = this.button_function.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    Axios.get(\"http://localhost:5000/users/user\")\r\n      .then((response) => {\r\n        var curr_email = localStorage.getItem(\"email\");\r\n        var data_array = [];\r\n\r\n        for (let i = 0, len = response.data.length; i < len; i++) {\r\n          let email = response.data[i].email;\r\n\r\n          if (curr_email === email) {\r\n            data_array = response.data[i].favourites;\r\n          }\r\n        }\r\n\r\n        var currency_added = \"\";\r\n        for (let i = 0, len = data_array.length; i < len; i++) {\r\n          if (data_array[i] === this.props.currency) {\r\n            currency_added = true;\r\n          }\r\n        }\r\n\r\n        this.setState({\r\n          favourites: data_array,\r\n          email: curr_email,\r\n          added: currency_added,\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  logger() {\r\n    console.log(this.state.email);\r\n    console.log(this.state.favourites);\r\n    console.log(this.props.currency);\r\n    console.log(this.state.added);\r\n  }\r\n\r\n  button_function() {\r\n    if (this.state.added) {\r\n      Axios.post(\"http://localhost:5000/users/userdeletefav\", {\r\n        email: this.state.email,\r\n        favourites: this.props.currency,\r\n      });\r\n      this.setState({\r\n        added: false,\r\n      });\r\n    } else {\r\n      Axios.post(\"http://localhost:5000/users/userupdatefav\", {\r\n        email: this.state.email,\r\n        favourites: this.props.currency,\r\n      });\r\n      this.setState({\r\n        added: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  button_text() {\r\n    if (this.state.added) {\r\n      return this.state.text2;\r\n    } else {\r\n      return this.state.text1;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return <button onClick={this.button_function}>{this.button_text()}</button>;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  if (state.auth.emaildata !== undefined) {\r\n    localStorage.setItem(\"email\", state.auth.emaildata.email);\r\n    return { email: state.auth.emaildata.email };\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, { loginUser })(fav_button);\r\n"]},"metadata":{},"sourceType":"module"}